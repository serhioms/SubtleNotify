# SubtleNotify

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —Å–ª—É—á–∞–π–Ω—ã, —Ç.–µ. –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã, –Ω–æ –Ω–µ –æ—á–µ–≤–∏–¥–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –ü–æ—ç—Ç–æ–º—É –ø—Ä–æ–µ–∫—Ç –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **SubtleNotify** - —Ç–æ–Ω–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.

## –°–µ—Ä–≤–∏—Å—ã

### REST API —Å –º–µ—Ç–æ–¥–∞–º–∏:

- **POST /action** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  ```json
  {
    "userId": "string",
    "actionType": "string",
    "timestamp": "string"
  }
  ```

- **GET /notifications** ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º–æ–π

- **GET [/actions](http://localhost:8080/api/subtlenotify/actions)** –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ `action` —Å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ `userId` –∏ `actionType`

- **POST /trigger** –∑–∞–ø–∏—Å–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä –≤ –ë–î
  ```json
    {
        "triggerIdent": "order_lunch_delivery",
        "triggerDescr" : "–ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ –∑–∞–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É –≤ –æ–±–µ–¥ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –¥–µ–Ω—å",
        "notifIdent" : "think_about_dinner",
        "notifDescr" : "–ü–æ—Ö–æ–∂–µ, –ø–æ—Ä–∞ –¥—É–º–∞—Ç—å –ø—Ä–æ –≤–∫—É—Å–Ω—ã–π –æ–±–µ–¥ üçù",
        "notifMoment" : "immediately | next_time",
        "expectWeekDays" : "sun,mon,tue,wed,thu,fri,sat",
        "expectEveryDays" : 1,
        "expectHowOften" : 2,
        "expectFromHr" : 11,
        "expectToHr" : 14,
        "actualWeekDays" : "sat,tue",
        "actualHours" : "5,6,7,8",
        "missYesterday" : true/false
    }
  ```
  
- **GET [/triggers](http://localhost:8080/api/subtlenotify/triggers)** –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ `trigger` —Å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ `actionType`

- **DELETE [/clean](http://localhost:8080/api/subtlenotify/clean)** –ø–æ—á–∏—Å—Ç–∏—Ç—å –ë–î


> **PS:** –ß—É—Ç—å –∏–∑–º–µ–Ω–∏–ª –∫–æ–Ω—Ç—Ä–∞–∫—Ç... –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –ø—Ä–∏–Ω—è—Ç–æ –≤ –Ω—ç–π–º–∏–Ω–≥–µ –≥–¥–µ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ. –î–æ–ø—É—Å–∫–∞—é—Ç—Å—è —Å–º—ã—Å–ª–æ–≤—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –ø–æ—ç—Ç–æ–º—É `action` –≤–º–µ—Å—Ç–æ `actions`.

### –õ–æ–≥–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è

**actionType** - –∏–º—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏.

### –ü—Ä–∏ –∫–∞–∂–¥–æ–º REST/action –∏—Å–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:

- –ó–∞–ø–∏—Å–∞—Ç—å action –≤ –ë–î
- –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –≤–∏–¥–µ —Ä—è–¥–∞ `timestamp` –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É `userId` –∏ `actionType` –≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –≥—Ä–∞–Ω–∏—Ü–∞—Ö
- –ù–∞–π—Ç–∏ —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `actionType` –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∫ —Ä—è–¥—É `timestamp`
- –ï—Å–ª–∏ –∫–∞–∫–æ–µ-–ª–∏–±–æ –ø—Ä–∞–≤–∏–ª–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, —Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º "–Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ" —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –ë–î –∏–∑–±–µ–≥–∞—è –¥—É–±–ª–µ–π

> **PS:** –û–≥—Ä–∞–Ω–∏—á–∏–º—Å—è –ø–æ–Ω–µ–¥–µ–ª—å–Ω—ã–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏. –ü–æ–º–µ—Å—è—á–Ω—ã–µ –∏ –≥–æ–¥–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–∂–∏–¥–∞—é—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö –ø—Ä–æ–≥—Ä–∞–º–º—ã.<br/>
> **PS:** –ù–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –Ω–∏–∫–∞–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª—è "–Ω–∞–¥–æ–µ–¥–ª–∏–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"

## –ü—Ä–∏–º–µ—Ä—ã –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–π

1. **–ø–∏—à–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** - –Ω–æ—á—å—é —Ç—Ä–∏ –¥–Ω—è –ø–æ–¥—Ä—è–¥ ‚Üí —É—Ç—Ä–æ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
2. **–ø–æ–∫—É–ø–∞–µ—Ç –∫–æ—Ñ–µ** - –ø–æ –ø–Ω, —Å—Ä, –ø—Ç ‚Üí –≤–æ –≤—Ç–æ—Ä–Ω–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–∫–∏–¥–∫–µ
3. **–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9–º —á–∞—Å—É ‚Üí –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã–ª –≤ 8–º, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —É–≤–µ–¥–æ–º–∏—Ç—å
4. **—á–∏—Ç–∞–µ—Ç —Å—Ç–∞—Ç—å–∏** - –ø–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω–∏—è–º ‚Üí –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ –≤ —Å—É–±–±–æ—Ç—É –≤–µ—á–µ—Ä–æ–º —É–≤–µ–¥–æ–º–∏—Ç—å
5. **–∑–∞–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É** - —á–µ—Ä–µ–∑ –¥–µ–Ω—å ‚Üí –Ω–∞ —Ç—Ä–µ—Ç–∏–π —Ü–∏–∫–ª —É–≤–µ–¥–æ–º–∏—Ç—å
6. **–ø—å—ë—Ç —á–∞–π** - –∫–∞–∂–¥—ã–π –≤–µ—á–µ—Ä –∏–ª–∏ –ø–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω–∏—è–º ‚Üí –µ—Å–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏–ª, —É–≤–µ–¥–æ–º–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º —Ä–∞–∑–æ–º
7. **–¥–µ–ª–∞–µ—Ç —à–∞–≥–∏** - –≤ 10–º —á–∞—Å—É –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Üí —É—Ç—Ä–æ–º —Å–ª–µ–¥—É—é—à–µ–≥–æ –¥–Ω—è —É–≤–µ–¥–æ–º–∏—Ç—å
8. **–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–¥–∞—á–∏** - –≤ —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ –ø–æ—Å–ª–µ –æ–±–µ–¥–∞ ‚Üí –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ —É—Ç—Ä–æ–º —É–≤–µ–¥–æ–º–∏—Ç—å
9. **—Å—Ç–∞–≤–∏—Ç –ª–∞–π–∫–∏** - –ø–æ —Å—Ä–µ–¥–∞–º ‚Üí —É–≤–µ–¥–æ–º–∏—Ç—å —Å —É—Ç—Ä–∞ –≤ —Å–ª–µ–¥—É—é—â—É—é —Å—Ä–µ–¥—É


## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å—Ç—ç–∫ Springboot —Å–µ—Ä–≤–∏—Å–æ–≤ - [SubtleNotifyController](src/main/java/ru/alumni/hub/subtlenotify/controller/SubtleNotifyController.java) ->  [Service](src/main/java/ru/alumni/hub/subtlenotify/service) ->  [Repository](src/main/java/ru/alumni/hub/subtlenotify/repository)

–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∏—Å–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å REST –≤—ã–∑–æ–≤–æ–º `/action` , –±—É–¥–µ–º –∑–∞–ø—É—Å–∫–∞—Ç—å –µ—ë –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

### –ü–ª—é—Å—ã/–º–∏–Ω—É—Å—ã:

- ‚úÖ –£–º–µ–Ω—å—à–∞–µ–º –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –ø—É–ª–æ–º —Ä–∞–±–æ—á–∏—Ö –ø–æ—Ç–æ–∫–æ–≤

## –≠–≤—Ä–∏—Å—Ç–∏–∫–∞ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏

–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –∑–∞–ª–æ–∂–µ–Ω–∞ –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º. 
 –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–º —É—Å–ª–æ–≤–∏—è–º, —Ç–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. 
 –ï—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ—Å–∫–æ–ª—å–∫–æ - –∑–∞–≤–∏—Å–∞—Ç—å –∏—Ö –≤—Å–µ –≤ –ë–î.

###  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞–¥–∞—ë—Ç—Å—è –≤ —Ç—Ä–∏–≥–≥–µ—Ä–µ:
  ```json
{
      ***
     "expectWeekDays" : "mon,wed,fri", 
     "expectEveryDays" : 1,
     "expectHowOften" : 2,
     "expectFromHr" : 11,
     "expectToHr" : 14,
     "missYesterday" : true/false,
      ***
}
```

- `expectWeekDays` - –≤ –∫–∞–∫–∏–µ –¥–Ω–∏ –æ–∂–∏–¥–∞—é—Ç—Å—è `action` –Ω–∞ –Ω–µ–¥–µ–ª–µ –∏–∑ —Ä—è–¥–∞ "sun,mon,tue,wed,thu,fri,sat" –∏ —Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å –ø–æ–¥—Ä—è–¥ –≤ `expectHowOften`
- `expectEveryDays` - —Å–∫–æ–ª—å–∫–æ  –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ (1) –∏–ª–∏ —á–µ—Ä–µ–∑ –¥–µ–Ω—å (2) –∏–ª–∏ –∫–∞–∂–¥—ã–π —Ç—Ä–µ—Ç–∏–π –¥–µ–Ω—å (3) –∏ —Ç.–¥. –æ–∂–∏–¥–∞—é—Ç—Å—è `action` –∏ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ –≤ `expectHowOften`
- `expectFromHr` –∏ `expectToHr` - –æ–∂–∏–¥–∞–µ–º—ã–µ —á–∞—Å—ã `action` (–ø–æ –¥–µ—Ñ–æ–ª—Ç—É –æ—Ç 0 –¥–æ 24 —á–∞—Å–æ–≤)
- `missYesterday` - true/false —Ñ–ª–∞–≥ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å–ª—É—á–∞—è –∫–æ–≥–¥–∞ –ø—Ä–µ–¥—ã–¥—É—â–∞—è –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –±—ã–ª–∞ –ø—Ä–æ–ø—É—â–µ–Ω–∞ (—Å–º –ø—Ä–∏–º–µ—Ä—ã [‚Ññ6 "–ø—å—ë—Ç —á–∞–π"](https://github.com/serhioms/SubtleNotify?tab=readme-ov-file#:~:text=%D1%82%D1%80%D0%B5%D1%82%D0%B8%D0%B9%20%D1%86%D0%B8%D0%BA%D0%BB%20%D1%83%D0%B2%D0%B5%D0%B4%D0%BE%D0%BC%D0%B8%D1%82%D1%8C-,%D0%BF%D1%8C%D1%91%D1%82%20%D1%87%D0%B0%D0%B9,-%2D%20%D0%BA%D0%B0%D0%B6%D0%B4%D1%8B%D0%B9%20%D0%B2%D0%B5%D1%87%D0%B5%D1%80%20%D0%B8%D0%BB%D0%B8))
> **PS:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –æ–¥–Ω–æ –∏–∑ –ø–µ—Ä–≤—ã—Ö –¥–≤—É—Ö –ø—Ä–∞–≤–∏–ª `expectWeekDays` –∏–ª–∏ `expectEveryDays`, –Ω–æ –Ω–µ –æ–±–∞ —Å—Ä–∞–∑—É


### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
  ```json
{
  "timestamp": "2025-11-06T21:40:00",
  "notification": "–ö–∞–∂–µ—Ç—Å—è, –≤—ã —Å–æ–≤–∞ ü¶â",
}
```
###  –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞–¥–∞—ë—Ç—Å—è –≤ —Ç—Ä–∏–≥–≥–µ—Ä–µ:

 ```json
{
    ***
    "notifMoment" : "immediately | next_time",
    "actualWeekDays" : "sat,tue",
    "actualHours" : "5,6,7,8", 
    ***
}
```

- `notifMoment` - –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞: `immediately` —Ç.–µ. —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ `actualHours` –∏–ª–∏  `next_time` —Ç.–µ. –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—é –≤ `actualHours`
- `actualWeekDays` - –±–µ—Ä—ë—Ç—Å—è –ø–æ–¥—Ö–æ–¥—è—â–∏–π –¥–µ–Ω—å –∏–∑ —Å–ø–∏—Å–∫–∞. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —Ç–æ –±–µ—Ä—ë—Ç—Å—è –ø–æ–¥—Ö–æ–¥—è—â–∏–π –¥–µ–Ω—å –∏–∑ —Å–ø–∏—Å–∫–∞ `expectEveryDays`
- `actualHours` - –±–µ—Ä—ë—Ç—Å—è –ø–æ–¥—Ö–æ–¥—è—â–∏–π —á–∞—Å –∏–∑ —Å–ø–∏—Å–∫–∞. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —Ç–æ –±–µ—Ä—ë—Ç—Å—è –∏–∑ `expectFromHr` –ø–ª—é—Å/–º–∏–Ω—É—Å 10 –º–∏–Ω—É—Ç

### –°—Ö–µ–º–∞ –ë–î:
![subtlenotify](path/to/image.png)

### –ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:

????